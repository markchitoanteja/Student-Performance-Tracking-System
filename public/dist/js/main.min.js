jQuery(document).ready(function(){function e(e){let a=["th","st","nd","rd"],t=e%100;return e+(a[(t-20)%10]||a[t]||a[0])}notification&&Swal.fire({title:notification.title,text:notification.text,icon:notification.icon}),$(".select2").select2(),$("[data-mask]").inputmask(),$(".datatable").DataTable({paging:!0,lengthChange:!1,ordering:!1}),$(".datatable-no-fiter").DataTable({filter:!1,paging:!0,lengthChange:!1,ordering:!1}),$(".collapse").on("show.bs.collapse",function(){$("#icon-"+this.id).removeClass("fa-chevron-left").addClass("fa-chevron-down")}),$(".collapse").on("hide.bs.collapse",function(){$("#icon-"+this.id).removeClass("fa-chevron-down").addClass("fa-chevron-left")}),$(".clickable_image").click(function(){let e=$(this).attr("src");$("#image_container").attr("src",e),$("#view_image_modal").modal("show")}),$("#mode").click(function(){let e="";e="dark"==mode?"light":"dark";var a=new FormData;a.append("mode",e),$.ajax({url:"change_mode",data:a,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&location.reload()},error:function(e,e,a){console.error(a)}})}),$(".logout").click(function(){$.ajax({url:"logout",type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&(location.href=base_url)},error:function(e,e,a){console.error(a)}})}),$("#account_settings").click(function(){$("#account_settings_modal").modal("show"),$(".loading").removeClass("d-none");var e=new FormData;e.append("user_id",user_id),$.ajax({url:"get_admin_data",data:e,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){$("#account_settings_id").val(e.id),$("#account_settings_name").val(e.name),$("#account_settings_username").val(e.username),$("#account_settings_old_password").val(e.password),$("#account_settings_old_image").val(e.image),$("#account_settings_image_display").attr("src",base_url+"public/dist/img/uploads/admin/"+e.image),$(".loading").addClass("d-none")},error:function(e,e,a){console.error(a)}})}),$("#account_settings_image").change(function(e){var a=$("#account_settings_image_display"),t=e.target.files[0];if(t){var s=URL.createObjectURL(t);a.attr("src",s),a.on("load",function(){URL.revokeObjectURL(s)})}else a.attr("src",base_url+"public/dist/img/uploads/admin/"+$("#account_settings_old_image").val())}),$("#account_settings_form").submit(function(){let e=$("#account_settings_id").val(),a=$("#account_settings_name").val(),t=$("#account_settings_username").val(),s=$("#account_settings_password").val(),d=$("#account_settings_confirm_password").val(),n=$("#account_settings_old_password").val(),r=$("#account_settings_image")[0],u=$("#account_settings_old_image").val(),o=0,i=!1;if(r.files.length>0){var c=r.files[0];i=!0}if(s!=d&&($("#account_settings_password").addClass("is-invalid"),$("#account_settings_confirm_password").addClass("is-invalid"),$("#error_account_settings_password").removeClass("d-none"),o++),!o){$("#account_settings_submit").text("Please wait..."),$("#account_settings_submit").attr("disabled",!0),$(".loading").removeClass("d-none");let l=!0;s||(s=n,l=!1);var p=new FormData;p.append("id",e),p.append("name",a),p.append("username",t),p.append("password",s),p.append("is_new_password",l),p.append("image",u),p.append("image_file",c),p.append("is_new_image",i),$.ajax({url:"update_admin",data:p,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&setTimeout(function(){location.reload()},1500)},error:function(e,e,a){console.error(a)}})}}),$("#account_settings_password").keydown(function(){$("#account_settings_password").removeClass("is-invalid"),$("#account_settings_confirm_password").removeClass("is-invalid"),$("#error_account_settings_password").addClass("d-none")}),$("#account_settings_confirm_password").keydown(function(){$("#account_settings_password").removeClass("is-invalid"),$("#account_settings_confirm_password").removeClass("is-invalid"),$("#error_account_settings_password").addClass("d-none")}),$("#new_student_image").change(function(e){var a=$("#new_student_image_display"),t=e.target.files[0];if(t){var s=URL.createObjectURL(t);a.attr("src",s),a.on("load",function(){URL.revokeObjectURL(s)})}else a.attr("src",base_url+"public/dist/img/default-user-image.png")}),$("#new_student_form").submit(function(){let e=$("#new_student_student_number").val(),a=$("#new_student_course").val(),t=$("#new_student_year").val(),s=$("#new_student_section").val(),d=$("#new_student_first_name").val(),n=$("#new_student_middle_name").val(),r=$("#new_student_last_name").val(),u=$("#new_student_birthday").val(),o=$("#new_student_mobile_number").val().replace(/\D/g,""),i=$("#new_student_email").val(),c=$("#new_student_address").val(),l=$("#new_student_image")[0],p=0;if(l.files.length>0)var v=l.files[0];if(11!=o.length&&($("#new_student_mobile_number").addClass("is-invalid"),$("#error_new_student_mobile_number").removeClass("d-none"),$("#new_student_mobile_number").focus(),p++),!p){$("#new_student_submit").text("Please wait..."),$("#new_student_submit").attr("disabled",!0),$(".loading").removeClass("d-none");var m=new FormData;m.append("student_number",e),m.append("course",a),m.append("year",t),m.append("section",s),m.append("first_name",d),m.append("middle_name",n),m.append("last_name",r),m.append("birthday",u),m.append("mobile_number",o),m.append("email",i),m.append("address",c),m.append("image_file",v),$.ajax({url:"save_student",data:m,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e?setTimeout(function(){location.reload()},1500):($("#new_student_submit").text("Submit"),$("#new_student_submit").removeAttr("disabled"),$(".loading").addClass("d-none"),$("#new_student_student_number").addClass("is-invalid"),$("#error_new_student_student_number").removeClass("d-none"))},error:function(e,e,a){console.error(a)}})}}),$("#new_student_mobile_number").keydown(function(){$("#new_student_mobile_number").removeClass("is-invalid"),$("#error_new_student_mobile_number").addClass("d-none")}),$("#new_student_student_number").keydown(function(){$("#new_student_student_number").removeClass("is-invalid"),$("#error_new_student_student_number").addClass("d-none")}),$(document).on("click",".delete_student",function(){let e=$(this).attr("student_id");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{if(a.isConfirmed){var t=new FormData;t.append("student_id",e),$.ajax({url:"delete_student",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&location.reload()},error:function(e,e,a){console.error(a)}})}})}),$(document).on("click",".edit_student",function(){let a=$(this).attr("student_id");$("#update_student_modal").modal("show"),$(".loading").removeClass("d-none");var t=new FormData;t.append("student_id",a),$.ajax({url:"get_student_data",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(a){$("#update_student_student_number").val(a.student_number),$("#update_student_course").val(a.course),$("#update_student_section").val(a.section),$("#update_student_first_name").val(a.first_name),$("#update_student_middle_name").val(a.middle_name),$("#update_student_last_name").val(a.last_name),$("#update_student_birthday").val(a.birthday),$("#update_student_mobile_number").val(a.mobile_number),$("#update_student_email").val(a.email),$("#update_student_address").val(a.address),$("#update_student_image_display").attr("src","public/dist/img/uploads/students/"+a.image),$("#update_student_id").val(a.id),$("#update_student_old_student_number").val(a.student_number),$("#update_student_old_image").val(a.image);var t=new FormData;t.append("code",a.course),$.ajax({url:"get_course_data_by_code",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(t){let s=parseInt(t.years);$("#update_student_year").removeAttr("disabled"),$("#update_student_year").empty();for(let d=1;d<=s;d++){let n=e(d);$("#update_student_year").append(new Option(n,n))}$("#update_student_year").val(a.year),$(".loading").addClass("d-none")},error:function(e,e,a){console.error(a)}})},error:function(e,e,a){console.error(a)}})}),$("#update_student_image").change(function(e){var a=$("#update_student_image_display"),t=e.target.files[0];if(t){var s=URL.createObjectURL(t);a.attr("src",s),a.on("load",function(){URL.revokeObjectURL(s)})}else a.attr("src",base_url+"public/dist/img/default-user-image.png")}),$("#update_student_mobile_number").keydown(function(){$("#update_student_mobile_number").removeClass("is-invalid"),$("#error_update_student_mobile_number").addClass("d-none")}),$("#update_student_student_number").keydown(function(){$("#update_student_student_number").removeClass("is-invalid"),$("#error_update_student_student_number").addClass("d-none")}),$("#update_student_form").submit(function(){let e=$("#update_student_student_number").val(),a=$("#update_student_course").val(),t=$("#update_student_year").val(),s=$("#update_student_section").val(),d=$("#update_student_first_name").val(),n=$("#update_student_middle_name").val(),r=$("#update_student_last_name").val(),u=$("#update_student_birthday").val(),o=$("#update_student_mobile_number").val().replace(/\D/g,""),i=$("#update_student_email").val(),c=$("#update_student_address").val(),l=$("#update_student_image")[0],p=$("#update_student_id").val(),v=$("#update_student_old_student_number").val(),m=$("#update_student_old_image").val(),b=!1,g=!1,w=0;if(l.files.length>0){var y=l.files[0];g=!0}if(e!=v&&(b=!0),11!=o.length&&($("#update_student_mobile_number").addClass("is-invalid"),$("#error_update_student_mobile_number").removeClass("d-none"),$("#update_student_mobile_number").focus(),w++),!w){$("#update_student_submit").text("Please wait..."),$("#update_student_submit").attr("disabled",!0),$(".loading").removeClass("d-none");var f=new FormData;f.append("student_number",e),f.append("course",a),f.append("year",t),f.append("section",s),f.append("first_name",d),f.append("middle_name",n),f.append("last_name",r),f.append("birthday",u),f.append("mobile_number",o),f.append("email",i),f.append("address",c),f.append("image_file",y),f.append("id",p),f.append("old_image",m),f.append("is_new_student_number",b),f.append("is_new_image",g),$.ajax({url:"update_student",data:f,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e?setTimeout(function(){location.reload()},1500):($("#update_student_submit").text("Submit"),$("#update_student_submit").removeAttr("disabled"),$(".loading").addClass("d-none"),$("#update_student_student_number").addClass("is-invalid"),$("#error_update_student_student_number").removeClass("d-none"))},error:function(e,e,a){console.error(a)}})}}),$("#new_course_form").submit(function(){let e=$("#new_course_code").val(),a=$("#new_course_title").val(),t=$("#new_course_years").val(),s=0;if(1>parseInt(t)&&($("#new_course_years").addClass("is-invalid"),$("#error_new_course_years").removeClass("d-none"),s++),!s){$("#new_course_submit").text("Please wait..."),$("#new_course_submit").attr("disabled",!0),$(".loading").removeClass("d-none");var d=new FormData;d.append("code",e),d.append("title",a),d.append("years",t),$.ajax({url:"add_course",data:d,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e?location.reload():($("#new_course_submit").text("Submit"),$("#new_course_submit").removeAttr("disabled"),$(".loading").addClass("d-none"),$("#new_course_code").addClass("is-invalid"),$("#error_new_course_code").removeClass("d-none"),$("#new_course_code").focus())},error:function(e,e,a){console.error(a)}})}}),$("#new_course_years").keydown(function(){$("#new_course_years").removeClass("is-invalid"),$("#error_new_course_years").addClass("d-none")}),$("#new_course_years").change(function(){$("#new_course_years").removeClass("is-invalid"),$("#error_new_course_years").addClass("d-none")}),$("#new_course_code").keydown(function(){$("#new_course_code").removeClass("is-invalid"),$("#error_new_course_code").addClass("d-none")}),$(document).on("click",".delete_course",function(){let e=$(this).attr("course_id");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{if(a.isConfirmed){var t=new FormData;t.append("course_id",e),$.ajax({url:"delete_course",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&location.reload()},error:function(e,e,a){console.error(a)}})}})}),$(document).on("click",".edit_course",function(){let e=$(this).attr("course_id");$("#update_course_modal").modal("show"),$(".loading").removeClass("d-none");var a=new FormData;a.append("course_id",e),$.ajax({url:"get_course_data",data:a,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){$("#update_course_code").val(e.code),$("#update_course_title").val(e.title),$("#update_course_years").val(e.years),$("#update_course_id").val(e.id),$("#update_course_old_code").val(e.code),$(".loading").addClass("d-none")},error:function(e,e,a){console.error(a)}})}),$("#update_course_form").submit(function(){let e=$("#update_course_code").val(),a=$("#update_course_title").val(),t=$("#update_course_years").val(),s=$("#update_course_id").val(),d=$("#update_course_old_code").val(),n=!1,r=0;if(1>parseInt(t)&&($("#update_course_years").addClass("is-invalid"),$("#error_update_course_years").removeClass("d-none"),r++),e!=d&&(n=!0),!r){$("#update_course_submit").text("Please wait..."),$("#update_course_submit").attr("disabled",!0),$(".loading").removeClass("d-none");var u=new FormData;u.append("id",s),u.append("code",e),u.append("title",a),u.append("years",t),u.append("is_new_code",n),$.ajax({url:"update_course",data:u,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e?location.reload():($("#update_course_submit").text("Submit"),$("#update_course_submit").removeAttr("disabled"),$(".loading").addClass("d-none"),$("#update_course_code").addClass("is-invalid"),$("#error_update_course_code").removeClass("d-none"),$("#update_course_code").focus())},error:function(e,e,a){console.error(a)}})}}),$("#update_course_years").keydown(function(){$("#update_course_years").removeClass("is-invalid"),$("#error_update_course_years").addClass("d-none")}),$("#update_course_years").change(function(){$("#update_course_years").removeClass("is-invalid"),$("#error_update_course_years").addClass("d-none")}),$("#update_course_code").keydown(function(){$("#update_course_code").removeClass("is-invalid"),$("#error_update_course_code").addClass("d-none")}),$("#new_student_course").change(function(){let a=$(this).val();var t=new FormData;t.append("code",a),$.ajax({url:"get_course_data_by_code",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(a){let t=parseInt(a.years);$("#new_student_year").removeAttr("disabled"),$("#new_student_year").empty();for(let s=1;s<=t;s++){let d=e(s);$("#new_student_year").append(new Option(d,d))}},error:function(e,e,a){console.error(a)}})}),$("#update_student_course").change(function(){let a=$(this).val();var t=new FormData;t.append("code",a),$.ajax({url:"get_course_data_by_code",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(a){let t=parseInt(a.years);$("#update_student_year").removeAttr("disabled"),$("#update_student_year").empty();for(let s=1;s<=t;s++){let d=e(s);$("#update_student_year").append(new Option(d,d))}},error:function(e,e,a){console.error(a)}})}),$("#new_subject_form").submit(function(){let e=$("#new_subject_code").val(),a=$("#new_subject_title").val(),t=$("#new_subject_lecture_units").val(),s=$("#new_subject_laboratory_units").val(),d=$("#new_subject_hours_per_week").val(),n=$("#new_subject_pre_requisites").val(),r=$("#new_subject_course").val(),u=$("#new_subject_year").val(),o=$("#new_subject_semester").val(),i=0;if(1>parseInt(d)&&($("#new_subject_hours_per_week").addClass("is-invalid"),$("#error_new_subject_hours_per_week").removeClass("d-none"),$("#new_subject_hours_per_week").focus(),i++),0>parseInt(s)&&($("#new_subject_laboratory_units").addClass("is-invalid"),$("#error_new_subject_laboratory_units").removeClass("d-none"),$("#new_subject_laboratory_units").focus(),i++),0>parseInt(t)&&($("#new_subject_lecture_units").addClass("is-invalid"),$("#error_new_subject_lecture_units").removeClass("d-none"),$("#new_subject_lecture_units").focus(),i++),!i){$(".loading").removeClass("d-none"),$("#new_subject_submit").text("Please wait..."),$("#new_subject_submit").attr("disabled",!0);var c=new FormData;c.append("code",e),c.append("title",a),c.append("lecture_units",t),c.append("laboratory_units",s),c.append("hours_per_week",d),c.append("pre_requisites",n),c.append("course",r),c.append("year",u),c.append("semester",o),$.ajax({url:"add_subject",data:c,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e?location.reload():($(".loading").addClass("d-none"),$("#new_subject_submit").text("Submit"),$("#new_subject_submit").removeAttr("disabled"),$("#new_subject_code").addClass("is-invalid"),$("#error_new_subject_code").removeClass("d-none"))},error:function(e,e,a){console.error(a)}})}}),$("#new_subject_code").keydown(function(){$("#new_subject_code").removeClass("is-invalid"),$("#error_new_subject_code").addClass("d-none")}),$("#new_subject_hours_per_week").keydown(function(){$("#new_subject_hours_per_week").removeClass("is-invalid"),$("#error_new_subject_hours_per_week").addClass("d-none")}),$("#new_subject_hours_per_week").change(function(){$("#new_subject_hours_per_week").removeClass("is-invalid"),$("#error_new_subject_hours_per_week").addClass("d-none")}),$("#new_subject_laboratory_units").keydown(function(){$("#new_subject_laboratory_units").removeClass("is-invalid"),$("#error_new_subject_laboratory_units").addClass("d-none")}),$("#new_subject_laboratory_units").change(function(){$("#new_subject_laboratory_units").removeClass("is-invalid"),$("#error_new_subject_laboratory_units").addClass("d-none")}),$("#new_subject_lecture_units").keydown(function(){$("#new_subject_lecture_units").removeClass("is-invalid"),$("#error_new_subject_lecture_units").addClass("d-none")}),$("#new_subject_lecture_units").change(function(){$("#new_subject_lecture_units").removeClass("is-invalid"),$("#error_new_subject_lecture_units").addClass("d-none")}),$(document).on("click",".delete_subject",function(){let e=$(this).attr("subject_id");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{if(a.isConfirmed){var t=new FormData;t.append("subject_id",e),$.ajax({url:"delete_subject",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&location.reload()},error:function(e,e,a){console.error(a)}})}})}),$(document).on("click",".edit_subject",function(){let a=$(this).attr("subject_id");$("#update_subject_modal").modal("show"),$(".loading").removeClass("d-none");var t=new FormData;t.append("subject_id",a),$.ajax({url:"get_subject_data",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(a){$("#update_subject_code").val(a.code),$("#update_subject_title").val(a.title),$("#update_subject_lecture_units").val(a.lecture_units),$("#update_subject_laboratory_units").val(a.laboratory_units),$("#update_subject_hours_per_week").val(a.hours_per_week),$("#update_subject_pre_requisites").val(null).trigger("change");let t=a.pre_requisites.split(",");$.each(t,function(e,a){$("#update_subject_pre_requisites option").filter(function(){return $(this).val().trim()===a.trim()}).prop("selected",!0)}),$("#update_subject_pre_requisites").trigger("change"),$("#update_subject_id").val(a.id),$("#update_subject_old_code").val(a.code),$("#update_subject_course").val(a.course),$("#update_subject_semester").val(a.semester);var s=new FormData;s.append("code",a.course),$.ajax({url:"get_course_data_by_code",data:s,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(t){let s=parseInt(t.years);$("#update_subject_year").removeAttr("disabled"),$("#update_subject_year").empty();for(let d=1;d<=s;d++){let n=e(d);$("#update_subject_year").append(new Option(n,n))}$("#update_subject_year").val(a.year),$(".loading").addClass("d-none")},error:function(e,e,a){console.error(a)}}),$(".loading").addClass("d-none")},error:function(e,e,a){console.error(a)}})}),$("#update_subject_form").submit(function(){let e=$("#update_subject_code").val(),a=$("#update_subject_title").val(),t=$("#update_subject_lecture_units").val(),s=$("#update_subject_laboratory_units").val(),d=$("#update_subject_hours_per_week").val(),n=$("#update_subject_pre_requisites").val(),r=$("#update_subject_course").val(),u=$("#update_subject_year").val(),o=$("#update_subject_semester").val(),i=$("#update_subject_id").val(),c=$("#update_subject_old_code").val(),l=0;if(1>parseInt(d)&&($("#update_subject_hours_per_week").addClass("is-invalid"),$("#error_update_subject_hours_per_week").removeClass("d-none"),$("#update_subject_hours_per_week").focus(),l++),0>parseInt(s)&&($("#update_subject_laboratory_units").addClass("is-invalid"),$("#error_update_subject_laboratory_units").removeClass("d-none"),$("#update_subject_laboratory_units").focus(),l++),0>parseInt(t)&&($("#update_subject_lecture_units").addClass("is-invalid"),$("#error_update_subject_lecture_units").removeClass("d-none"),$("#update_subject_lecture_units").focus(),l++),!l){$("#update_subject_submit").text("Please wait..."),$("#update_subject_submit").attr("disabled",!0),$(".loading").removeClass("d-none");let p=!1;e!=c&&(p=!0);var v=new FormData;v.append("id",i),v.append("is_new_code",p),v.append("code",e),v.append("title",a),v.append("lecture_units",t),v.append("laboratory_units",s),v.append("hours_per_week",d),v.append("pre_requisites",n),v.append("course",r),v.append("year",u),v.append("semester",o),$.ajax({url:"update_subject",data:v,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e?location.reload():($(".loading").addClass("d-none"),$("#update_subject_submit").text("Submit"),$("#update_subject_submit").removeAttr("disabled"),$("#update_subject_code").addClass("is-invalid"),$("#error_update_subject_code").removeClass("d-none"))},error:function(e,e,a){console.error(a)}})}}),$("#update_subject_code").keydown(function(){$("#update_subject_code").removeClass("is-invalid"),$("#error_update_subject_code").addClass("d-none")}),$("#update_subject_hours_per_week").keydown(function(){$("#update_subject_hours_per_week").removeClass("is-invalid"),$("#error_update_subject_hours_per_week").addClass("d-none")}),$("#update_subject_hours_per_week").change(function(){$("#update_subject_hours_per_week").removeClass("is-invalid"),$("#error_update_subject_hours_per_week").addClass("d-none")}),$("#update_subject_laboratory_units").keydown(function(){$("#update_subject_laboratory_units").removeClass("is-invalid"),$("#error_update_subject_laboratory_units").addClass("d-none")}),$("#update_subject_laboratory_units").change(function(){$("#update_subject_laboratory_units").removeClass("is-invalid"),$("#error_update_subject_laboratory_units").addClass("d-none")}),$("#update_subject_lecture_units").keydown(function(){$("#update_subject_lecture_units").removeClass("is-invalid"),$("#error_update_subject_lecture_units").addClass("d-none")}),$("#update_subject_lecture_units").change(function(){$("#update_subject_lecture_units").removeClass("is-invalid"),$("#error_update_subject_lecture_units").addClass("d-none")}),$("#new_subject_course").change(function(){let a=$(this).val();var t=new FormData;t.append("code",a),$.ajax({url:"get_course_data_by_code",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(a){let t=parseInt(a.years);$("#new_subject_year").removeAttr("disabled"),$("#new_subject_year").empty();for(let s=1;s<=t;s++){let d=e(s);$("#new_subject_year").append(new Option(d,d))}},error:function(e,e,a){console.error(a)}}),$("#new_subject_pre_requisites").empty();var s=new FormData;s.append("course",a),$.ajax({url:"get_subject_data_by_course",data:s,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&($("#new_subject_pre_requisites").append("<option value disabled selected></option>"),$.each(e,function(e,a){$("#new_subject_pre_requisites").append('<option value="'+a.id+'">'+a.title+"</option>")}))},error:function(e,e,a){console.error(a)}})}),$("#update_subject_course").change(function(){let a=$(this).val();var t=new FormData;t.append("code",a),$.ajax({url:"get_course_data_by_code",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(a){let t=parseInt(a.years);$("#update_subject_year").removeAttr("disabled"),$("#update_subject_year").empty();for(let s=1;s<=t;s++){let d=e(s);$("#update_subject_year").append(new Option(d,d))}},error:function(e,e,a){console.error(a)}}),$("#update_subject_pre_requisites").empty();var s=new FormData;s.append("course",a),$.ajax({url:"get_subject_data_by_course",data:s,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&($("#update_subject_pre_requisites").removeAttr("disabled"),$("#update_subject_pre_requisites").append("<option value disabled selected></option>"),$.each(e,function(e,a){$("#update_subject_pre_requisites").append('<option value="'+a.id+'">'+a.title+"</option>")}))},error:function(e,e,a){console.error(a)}})}),$("#new_grade_course").change(function(){let a=$(this).val(),t=$("#new_grade_year").val(),s=$("#new_grade_semester").val();$("#new_grade_student_id").removeClass("is-invalid"),$("#new_grade_course").removeClass("is-invalid"),$("#new_grade_year").removeClass("is-invalid"),$("#new_grade_semester").removeClass("is-invalid"),$("#new_grade_subject_id").removeClass("is-invalid");var d=new FormData;if(d.append("code",a),$.ajax({url:"get_course_data_by_code",data:d,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(a){let t=parseInt(a.years);$("#new_grade_year").removeAttr("disabled"),$("#new_grade_year").empty();for(let s=1;s<=t;s++){let d=e(s);$("#new_grade_year").append(new Option(d,d))}},error:function(e,e,a){console.error(a)}}),$("#new_grade_subject_id").empty(),a&&t&&s){var n=new FormData;n.append("course",a),n.append("year",t),n.append("semester",s),$.ajax({url:"get_subjects",data:n,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&($("#new_grade_subject_id").removeAttr("disabled"),$("#new_grade_subject_id").append("<option value disabled selected></option>"),$.each(e,function(e,a){$("#new_grade_subject_id").append('<option value="'+a.id+'">'+a.title+"</option>")}))},error:function(e,e,a){console.error(a)}})}}),$("#new_grade_year").change(function(){let e=$("#new_grade_course").val(),a=$("#new_grade_year").val(),t=$("#new_grade_semester").val();if($("#new_grade_student_id").removeClass("is-invalid"),$("#new_grade_course").removeClass("is-invalid"),$("#new_grade_year").removeClass("is-invalid"),$("#new_grade_semester").removeClass("is-invalid"),$("#new_grade_subject_id").removeClass("is-invalid"),$("#new_grade_subject_id").empty(),e&&a&&t){var s=new FormData;s.append("course",e),s.append("year",a),s.append("semester",t),$.ajax({url:"get_subjects",data:s,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&($("#new_grade_subject_id").removeAttr("disabled"),$("#new_grade_subject_id").append("<option value disabled selected></option>"),$.each(e,function(e,a){$("#new_grade_subject_id").append('<option value="'+a.id+'">'+a.title+"</option>")}))},error:function(e,e,a){console.error(a)}})}}),$("#new_grade_semester").change(function(){let e=$("#new_grade_course").val(),a=$("#new_grade_year").val(),t=$("#new_grade_semester").val();if($("#new_grade_student_id").removeClass("is-invalid"),$("#new_grade_course").removeClass("is-invalid"),$("#new_grade_year").removeClass("is-invalid"),$("#new_grade_semester").removeClass("is-invalid"),$("#new_grade_subject_id").removeClass("is-invalid"),$("#new_grade_subject_id").empty(),e&&a&&t){var s=new FormData;s.append("course",e),s.append("year",a),s.append("semester",t),$.ajax({url:"get_subjects",data:s,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&($("#new_grade_subject_id").removeAttr("disabled"),$("#new_grade_subject_id").append("<option value disabled selected></option>"),$.each(e,function(e,a){$("#new_grade_subject_id").append('<option value="'+a.id+'">'+a.title+"</option>")}))},error:function(e,e,a){console.error(a)}})}}),$("#new_grade_form").submit(function(){let e=$("#new_grade_student_id").val(),a=$("#new_grade_course").val(),t=$("#new_grade_year").val(),s=$("#new_grade_semester").val(),d=$("#new_grade_subject_id").val(),n=$("#new_grade_grade").val();if(1>parseFloat(n))$("#new_grade_grade").addClass("is-invalid"),$("#error_new_grade_grade").removeClass("d-none"),$("#new_grade_grade").focus();else{$(".loading").removeClass("d-none"),$("#new_grade_submit").text("Please wait..."),$("#new_grade_submit").attr("disabled",!0);var r=new FormData;r.append("student_id",e),r.append("course",a),r.append("year",t),r.append("semester",s),r.append("subject_id",d),r.append("grade",n),$.ajax({url:"add_grade",data:r,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e?location.reload():($("#new_grade_student_id").addClass("is-invalid"),$("#new_grade_course").addClass("is-invalid"),$("#new_grade_year").addClass("is-invalid"),$("#new_grade_semester").addClass("is-invalid"),$("#new_grade_subject_id").addClass("is-invalid"),$(".loading").addClass("d-none"),$("#new_grade_submit").text("Submit"),$("#new_grade_submit").removeAttr("disabled"))},error:function(e,e,a){console.error(a)}})}}),$("#new_grade_grade").keydown(function(){$("#new_grade_grade").removeClass("is-invalid"),$("#error_new_grade_grade").addClass("d-none")}),$("#new_grade_grade").change(function(){$("#new_grade_grade").removeClass("is-invalid"),$("#error_new_grade_grade").addClass("d-none")}),$("#new_grade_student_id").change(function(){$("#new_grade_student_id").removeClass("is-invalid"),$("#new_grade_course").removeClass("is-invalid"),$("#new_grade_year").removeClass("is-invalid"),$("#new_grade_semester").removeClass("is-invalid"),$("#new_grade_subject_id").removeClass("is-invalid")}),$("#new_grade_subject_id").change(function(){$("#new_grade_student_id").removeClass("is-invalid"),$("#new_grade_course").removeClass("is-invalid"),$("#new_grade_year").removeClass("is-invalid"),$("#new_grade_semester").removeClass("is-invalid"),$("#new_grade_subject_id").removeClass("is-invalid")}),$(document).on("click",".delete_grade",function(){let e=$(this).attr("grade_id");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{if(a.isConfirmed){var t=new FormData;t.append("grade_id",e),$.ajax({url:"delete_grade",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&location.reload()},error:function(e,e,a){console.error(a)}})}})}),$(document).on("click",".edit_grade",function(){let a=$(this).attr("grade_id");$("#update_grade_modal").modal("show"),$(".loading").removeClass("d-none");var t=new FormData;t.append("grade_id",a),$.ajax({url:"get_grade_data",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(a){$("#update_grade_student_id").val(a.student_id),$("#update_grade_course").val(a.course);var t=new FormData;t.append("code",a.course),$.ajax({url:"get_course_data_by_code",data:t,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(t){let s=parseInt(t.years);$("#update_grade_year").removeAttr("disabled"),$("#update_grade_year").empty();for(let d=1;d<=s;d++){let n=e(d);$("#update_grade_year").append(new Option(n,n))}$("#update_grade_year").val(a.year),$(".loading").addClass("d-none")},error:function(e,e,a){console.error(a)}}),$("#update_grade_semester").val(a.semester),$("#update_grade_subject_id").empty();let s=a.course,d=a.year,n=a.semester;if(s&&d&&n){var r=new FormData;r.append("course",s),r.append("year",d),r.append("semester",n),$.ajax({url:"get_subjects",data:r,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&($("#update_grade_subject_id").removeAttr("disabled"),$("#update_grade_subject_id").append("<option value disabled selected></option>"),$.each(e,function(e,a){$("#update_grade_subject_id").append('<option value="'+a.id+'">'+a.title+"</option>")}),$("#update_grade_subject_id").val(a.subject_id))},error:function(e,e,a){console.error(a)}})}$("#update_grade_grade").val(a.grade),$("#update_grade_id").val(a.id),$("#update_grade_old_student_id").val(a.student_id),$("#update_grade_old_course").val(a.course),$("#update_grade_old_year").val(a.year),$("#update_grade_old_semester").val(a.semester),$("#update_grade_old_subject_id").val(a.subject_id),$(".loading").addClass("d-none")},error:function(e,e,a){console.error(a)}})}),$("#update_grade_course").change(function(){let a=$(this).val(),t=$("#update_grade_year").val(),s=$("#update_grade_semester").val();$("#update_grade_student_id").removeClass("is-invalid"),$("#update_grade_course").removeClass("is-invalid"),$("#update_grade_year").removeClass("is-invalid"),$("#update_grade_semester").removeClass("is-invalid"),$("#update_grade_subject_id").removeClass("is-invalid");var d=new FormData;if(d.append("code",a),$.ajax({url:"get_course_data_by_code",data:d,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(a){let t=parseInt(a.years);$("#update_grade_year").removeAttr("disabled"),$("#update_grade_year").empty();for(let s=1;s<=t;s++){let d=e(s);$("#update_grade_year").append(new Option(d,d))}},error:function(e,e,a){console.error(a)}}),$("#update_grade_subject_id").empty(),a&&t&&s){var n=new FormData;n.append("course",a),n.append("year",t),n.append("semester",s),$.ajax({url:"get_subjects",data:n,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&($("#update_grade_subject_id").removeAttr("disabled"),$("#update_grade_subject_id").append("<option value disabled selected></option>"),$.each(e,function(e,a){$("#update_grade_subject_id").append('<option value="'+a.id+'">'+a.title+"</option>")}))},error:function(e,e,a){console.error(a)}})}}),$("#update_grade_year").change(function(){let e=$("#update_grade_course").val(),a=$("#update_grade_year").val(),t=$("#update_grade_semester").val();if($("#update_grade_student_id").removeClass("is-invalid"),$("#update_grade_course").removeClass("is-invalid"),$("#update_grade_year").removeClass("is-invalid"),$("#update_grade_semester").removeClass("is-invalid"),$("#update_grade_subject_id").removeClass("is-invalid"),$("#update_grade_subject_id").empty(),e&&a&&t){var s=new FormData;s.append("course",e),s.append("year",a),s.append("semester",t),$.ajax({url:"get_subjects",data:s,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&($("#update_grade_subject_id").removeAttr("disabled"),$("#update_grade_subject_id").append("<option value disabled selected></option>"),$.each(e,function(e,a){$("#update_grade_subject_id").append('<option value="'+a.id+'">'+a.title+"</option>")}))},error:function(e,e,a){console.error(a)}})}}),$("#update_grade_semester").change(function(){let e=$("#update_grade_course").val(),a=$("#update_grade_year").val(),t=$("#update_grade_semester").val();if($("#update_grade_student_id").removeClass("is-invalid"),$("#update_grade_course").removeClass("is-invalid"),$("#update_grade_year").removeClass("is-invalid"),$("#update_grade_semester").removeClass("is-invalid"),$("#update_grade_subject_id").removeClass("is-invalid"),$("#update_grade_subject_id").empty(),e&&a&&t){var s=new FormData;s.append("course",e),s.append("year",a),s.append("semester",t),$.ajax({url:"get_subjects",data:s,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e&&($("#update_grade_subject_id").removeAttr("disabled"),$("#update_grade_subject_id").append("<option value disabled selected></option>"),$.each(e,function(e,a){$("#update_grade_subject_id").append('<option value="'+a.id+'">'+a.title+"</option>")}))},error:function(e,e,a){console.error(a)}})}}),$("#update_grade_grade").keydown(function(){$("#update_grade_grade").removeClass("is-invalid"),$("#error_update_grade_grade").addClass("d-none")}),$("#update_grade_grade").change(function(){$("#update_grade_grade").removeClass("is-invalid"),$("#error_update_grade_grade").addClass("d-none")}),$("#update_grade_student_id").change(function(){$("#update_grade_student_id").removeClass("is-invalid"),$("#update_grade_course").removeClass("is-invalid"),$("#update_grade_year").removeClass("is-invalid"),$("#update_grade_semester").removeClass("is-invalid"),$("#update_grade_subject_id").removeClass("is-invalid")}),$("#update_grade_subject_id").change(function(){$("#update_grade_student_id").removeClass("is-invalid"),$("#update_grade_course").removeClass("is-invalid"),$("#update_grade_year").removeClass("is-invalid"),$("#update_grade_semester").removeClass("is-invalid"),$("#update_grade_subject_id").removeClass("is-invalid")}),$("#update_grade_form").submit(function(){let e=$("#update_grade_student_id").val(),a=$("#update_grade_course").val(),t=$("#update_grade_year").val(),s=$("#update_grade_semester").val(),d=$("#update_grade_subject_id").val(),n=$("#update_grade_grade").val(),r=$("#update_grade_id").val(),u=$("#update_grade_old_student_id").val(),o=$("#update_grade_old_course").val(),i=$("#update_grade_old_year").val(),c=$("#update_grade_old_semester").val(),l=$("#update_grade_old_subject_id").val(),p=!1;if((e!=u||a!=o||t!=i||s!=c||d!=l)&&(p=!0),1>parseFloat(n))$("#update_grade_grade").addClass("is-invalid"),$("#error_update_grade_grade").removeClass("d-none"),$("#update_grade_grade").focus();else{$(".loading").removeClass("d-none"),$("#update_grade_submit").text("Please wait..."),$("#update_grade_submit").attr("disabled",!0);var v=new FormData;v.append("id",r),v.append("is_edited",p),v.append("student_id",e),v.append("course",a),v.append("year",t),v.append("semester",s),v.append("subject_id",d),v.append("grade",n),$.ajax({url:"update_grade",data:v,type:"POST",dataType:"JSON",processData:!1,contentType:!1,success:function(e){e?location.reload():($("#update_grade_student_id").addClass("is-invalid"),$("#update_grade_course").addClass("is-invalid"),$("#update_grade_year").addClass("is-invalid"),$("#update_grade_semester").addClass("is-invalid"),$("#update_grade_subject_id").addClass("is-invalid"),$(".loading").addClass("d-none"),$("#update_grade_submit").text("Submit"),$("#update_grade_submit").removeAttr("disabled"))},error:function(e,e,a){console.error(a)}})}})});